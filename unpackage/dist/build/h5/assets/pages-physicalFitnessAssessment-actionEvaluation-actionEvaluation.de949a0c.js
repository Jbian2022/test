import{E as e,a9 as t,V as s,H as o,m as a,O as l,o as n,a as c,w as i,i as r,b as u,d,x as h,A as p,B as g,F as f,n as m,t as y,p as C,q as b,aa as T,I as k}from"./index.2d1e5cbb.js";import{B as _}from"./bgTheamCompontent.f506f940.js";import{N as D}from"./navBarCompontent.7dcad6b7.js";import{_ as N}from"./openarrit.1af81aaf.js";import{_ as v}from"./close.d60a6d93.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import"./back.3d645e4a.js";const x=e.importObject("testResults",{customUI:!0});e.importObject("businessCloudObject",{customUI:!0});const q=w({setup(){const e=t(!1);return{show:e,showPopup:()=>{console.log("11111"),e.value=!0},closePopup:()=>{e.value=!1}}},created(){s()},onLoad:function(e){let t=JSON.parse(e.data);this.actionData=t,console.log(this.actionData),this.leftNavTitle=this.actionData.questionContent,this.imgUrl=this.actionData.url,this.videoUrl=this.actionData.answerRemark.url,this.traineeNo=e.traineeNo,this.questionCode=e.questionCode,this.codes=this.actionData.code,this.getTraineeInfo(),this.getData()},watch:{resultValue(e,t){setTimeout(this.testResult(this.gender,this.age,e),300)}},components:{BgTheamCompontent:_,NavBarCompontent:D},data:()=>({gender:"1",age:29,resValue:80,isfocus:!0,resultValue:"",codes:"",typeText:"待测",actionData:[],typeColor:"#4B525E",imgUrl:"",leftNavTitle:"",videoUrl:"",traineeNo:"",questionCode:"",restData:[{traineeNo:"",questionCode:"",testResult:[],userId:"",status:"0"}],backgroundColor:"rgba(56,61,70, 1)",startData:[{clientX:"",clientY:""}]}),methods:{focus(){this.isfocus=!1},blur(){this.isfocus=!0},start(e){console.log("开始下滑坐标",e.changedTouches[0].clientY),this.startData.clientX=e.changedTouches[0].clientX,this.startData.clientY=e.changedTouches[0].clientY},end(e){console.log("结束下滑坐标",e.changedTouches[0].clientY);const t=e.changedTouches[0].clientX-this.startData.clientX,s=e.changedTouches[0].clientY-this.startData.clientY;s<-50?console.log("下滑"):s>50?console.log("上滑"):t>50?(console.log("左滑"),o({url:"/pages/physicalFitnessAssessment/physicalFitnessAssessment?traineeNo="+this.traineeNo+"&questionCode="+this.questionCode})):t<-50?(console.log("右滑"),o({url:"/pages/physicalFitnessAssessment/physicalFitnessAssessment?traineeNo="+this.traineeNo+"&questionCode="+this.questionCode})):console.log("无效")},testResult(e,t,s){console.log(e,t,s),""==(s=Number(s))?(this.levelColor(""),this.typeText="待测"):x.method1(e,t,s,this.codes).then((e=>{if(console.log(e.data),s>500){switch(this.codes){case"F0001":this.typeText="非常差",this.typeColor="rgba(240, 66, 66, 1)",this.backgroundColor="rgba(65, 60, 69, 0.5)",this.resultValue=500;break;case"F0002":case"F0003":case"F0004":this.typeText="优秀",this.typeColor="rgba(1, 224, 140, 1)",this.backgroundColor="rgba(53, 68, 73, 0.5)",this.resultValue=500;break;default:this.typeColor="rgba(75, 82, 94, 1)"}a({icon:"none",title:"最大数值上限为500",duration:800,width:220})}else this.typeText=e.data[0].resultLevel,this.levelColor(this.typeText)}))},async getTraineeInfo(){const e={};let t="";e.traineeId=this.traineeNo,x.getOnlyList(e).then((e=>{e.success&&(console.log(e.data[0].birthday),this.gender=e.data[0].gender,t=e.data[0].birthday,this.age=Number(this.getAge(t)))}))},getAge(e){e=e.split("-");let t=new Date,s=[t.getFullYear(),t.getMonth()+1,t.getDate()],o=s.map(((t,s)=>t-e[s]));if(o[2]<0){let e=new Date(s[0],s[1],0);o[1]--,o[2]+=e.getDate()}return o[1]<0&&(o[0]--,o[1]+=12),console.log(o[0]+"岁"+o[1]+"月"+o[2]+"天"),o[0]},levelColor(e){switch(console.log(e),e){case"优秀":case"良好":case"非常好":this.typeColor="rgba(1, 224, 140, 1)",this.backgroundColor="rgba(53, 68, 73, 0.5)";break;case"中等":case"中上等":case"中下等":case"尚可":this.typeColor="rgba(255, 193, 60, 1)",this.backgroundColor="rgba(66, 67, 69, 0.5)";break;case"较差":case"非常差":case"需改善":this.typeColor="rgba(240, 66, 66, 1)",this.backgroundColor="rgba(65, 60, 69, 0.5)";break;default:this.typeColor="rgba(75, 82, 94, 1)",this.backgroundColor="rgba(56,61,70, 1)"}},actionResDate(){const e={},t={};e.traineeNo=this.traineeNo,e.questionCode=this.questionCode,e.code=this.actionData.code,t.actionVlue=this.resultValue,t.actionTypeText=this.typeText,e.testDate=new Date,e.physicalData=t,e.status="0",console.log(e);const s=x.opearConfig(e,"bodyTestReport").then((e=>{console.log(e,"我要保存了"),e.success&&(l({url:"/pages/physicalFitnessAssessment/physicalFitnessAssessment?traineeNo="+this.traineeNo+"&questionCode="+this.questionCode}),a({icon:"success",title:e.message,duration:800}))})).catch((()=>{}));console.log(s)},getData(){const e={};e.traineeNo=this.traineeNo,e.questionCode=this.questionCode,e.code=this.codes,x.opearPHConfigQuery(e).then((e=>{console.log(e.data),this.resultValue=e.data[0].physicalData.actionVlue})).catch((()=>{this.resultValue=""}))}}},[["render",function(e,t,s,o,a,l){const _=C("BgTheamCompontent"),D=C("NavBarCompontent"),w=b,x=r,q=T,A=C("van-popup"),F=k,V=C("van-col"),B=C("van-row");return n(),c(x,{class:"content_style",onTouchstart:l.start,onTouchend:l.end},{default:i((()=>[u(_,{theamType:"currency"}),u(D,{leftNavTitle:a.leftNavTitle},null,8,["leftNavTitle"]),u(x,{class:"body_content",id:"bodycontent"},{default:i((()=>[u(x,{class:"clickAction",onClick:o.showPopup},{default:i((()=>[d(" 点击查看标准动作描述 "),u(w,{src:N})])),_:1},8,["onClick"]),u(A,{show:o.show,"onUpdate:show":t[0]||(t[0]=e=>o.show=e),position:"top",round:"",overlay:!1,class:"clickActionContent"},{default:i((()=>[u(x,{class:"clickActionBody"},{default:i((()=>[o.show?(n(),c(q,{key:0,src:a.videoUrl,wid:"",autoplay:"","custom-cache":!1,muted:""},null,8,["src"])):h("",!0),u(x,{class:"clickActionText"},{default:i((()=>[u(x,{class:"Actionname"},{default:i((()=>[d("标准动作：")])),_:1}),u(x,null,{default:i((()=>[(n(!0),p(f,null,g(a.actionData.answerRemark.detailArray,((e,t)=>(n(),p("p",null,y(e),1)))),256))])),_:1})])),_:1}),u(x,{class:"clickActionEnd",onClick:o.closePopup},{default:i((()=>[d("收起 "),u(w,{src:v})])),_:1},8,["onClick"])])),_:1})])),_:1},8,["show"]),u(w,{src:a.imgUrl,class:"contentImg"},null,8,["src"]),u(x,{class:"contentBlock"},{default:i((()=>[u(B,null,{default:i((()=>[u(V,{span:"16"},{default:i((()=>["F0001"==a.actionData.code?(n(),c(x,{key:0,class:"testText"},{default:i((()=>[d("请填写心率")])),_:1})):(n(),c(x,{key:1,class:"testText"},{default:i((()=>[d("请填写数量（力竭）")])),_:1})),u(x,{class:"testInput"},{default:i((()=>[u(x,null,{default:i((()=>[u(F,{class:"inputBlock",type:"number",modelValue:a.resultValue,"onUpdate:modelValue":t[1]||(t[1]=e=>a.resultValue=e),placeholder:"请填写","cursor-spacing":45,"auto-blur":!0,onFocus:l.focus,onBlur:l.blur,onConfirm:l.blur},null,8,["modelValue","onFocus","onBlur","onConfirm"])])),_:1}),"F0001"==a.actionData.code?(n(),c(x,{key:0,class:"inputText"},{default:i((()=>[d("/分")])),_:1})):(n(),c(x,{key:1,class:"inputText"},{default:i((()=>[d("/个")])),_:1}))])),_:1})])),_:1}),u(V,{span:"8"},{default:i((()=>[u(x,{class:"dynamicshow_right"},{default:i((()=>[u(x,{class:"circle",style:m("border: 4px solid "+a.typeColor+";background-color:"+a.backgroundColor+";")},{default:i((()=>[u(x,{class:"circleText",style:m("color:"+a.typeColor+";")},{default:i((()=>[d(y(a.typeText),1)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(x,null,{default:i((()=>[a.isfocus?(n(),c(x,{key:0,class:"postureButton",onClick:t[2]||(t[2]=e=>l.actionResDate())},{default:i((()=>[d("保存")])),_:1})):h("",!0)])),_:1})])),_:1},8,["onTouchstart","onTouchend"])}],["__scopeId","data-v-26c033e2"]]);export{q as default};
