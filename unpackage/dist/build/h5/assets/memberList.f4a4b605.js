import{o as t,a as e,w as s,b as o,r as i,A as n,F as a,B as l,n as r,f as c,d as h,t as d,C as u,i as p,E as f,h as m,k as g,m as _,l as b,D as y,p as w,u as v,v as k}from"./index.3c07bbe7.js";import{_ as C}from"./uni-popup.159bf41e.js";import{r as S}from"./uni-app.es.2e9f864b.js";import{_ as x}from"./_plugin-vue_export-helper.cdc0426e.js";import{d as T}from"./util.18554214.js";let $={},M=null;M=function(){var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=!0;for(let o=0;o<e.length-1;o++)if(t.indexOf(e[o])>0){s=!1;break}return s}(),$={data:()=>({is_show:"none"}),watch:{show(t){this.is_show=this.show}},created(){this.swipeaction=this.getSwipeAction(),void 0!==this.swipeaction.children&&this.swipeaction.children.push(this)},mounted(){this.is_show=this.show},methods:{closeSwipe(t){this.autoClose&&this.swipeaction.closeOther(this)},change(t){this.$emit("change",t.open),this.is_show!==t.open&&(this.is_show=t.open)},appTouchStart(t){if(M)return;const{clientX:e}=t.changedTouches[0];this.clientX=e,this.timestamp=(new Date).getTime()},appTouchEnd(t,e,s,o){if(M)return;const{clientX:i}=t.changedTouches[0];let n=Math.abs(this.clientX-i),a=(new Date).getTime()-this.timestamp;n<40&&a<300&&this.$emit("click",{content:s,index:e,position:o})},onClickForPC(t,e,s){M&&this.$emit("click",{content:e,index:t,position:s})}}};var F=!1;function X(t,e){var s=t.instance,o=s.getDataset().disabled,i=s.getState();W(s,e),(o=("string"==typeof o?JSON.parse(o):o)||!1)||(s.requestAnimationFrame((function(){s.removeClass("ani"),e.callMethod("closeSwipe")})),i.x=i.left||0,function(t){var e=t.instance,s=e.getState();O(e);var o=t.touches[0];F&&Y()&&(o=t);s.startX=o.clientX,s.startY=o.clientY}(t))}function A(t,e){var s=t.instance,o=s.getDataset().disabled,i=s.getState();(o=("string"==typeof o?JSON.parse(o):o)||!1)||(!function(t){var e=t.instance,s=e.getState(),o=t.touches[0];F&&Y()&&(o=t);s.deltaX=o.clientX-s.startX,s.deltaY=o.clientY-s.startY,s.offsetY=Math.abs(s.deltaY),s.offsetX=Math.abs(s.deltaX),s.direction=s.direction||function(t,e){if(t>e&&t>10)return"horizontal";if(e>t&&e>10)return"vertical";return""}(s.offsetX,s.offsetY)}(t),"horizontal"===i.direction&&(t.preventDefault&&t.preventDefault(),L(i.x+i.deltaX,s)))}function D(t,e){var s=t.instance,o=s.getDataset().disabled,i=s.getState();(o=("string"==typeof o?JSON.parse(o):o)||!1)||function(t,e,s){var o=e.getState(),i=o.threshold;o.position;var n=o.isopen||"none",a=o.leftWidth,l=o.rightWidth;if(0===o.deltaX)return void N("none",e,s);N("none"===n&&l>0&&-t>i||"none"!==n&&l>0&&l+t<i?"right":"none"===n&&a>0&&t>i||"none"!==n&&a>0&&a-t<i?"left":"none",e,s)}(i.left,s,e)}function L(t,e,s){t=t||0;var o,i,n,a=e.getState(),l=a.leftWidth,r=a.rightWidth;a.left=(o=t,i=-r,n=l,Math.min(Math.max(o,i),n)),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+a.left+"px)","-webkit-transform":"translateX("+a.left+"px)"})}))}function W(t,e){var s,o,i=t.getState(),n=e.selectComponent(".button-group--left"),a=e.selectComponent(".button-group--right");s=n.getBoundingClientRect(),o=a.getBoundingClientRect(),i.leftWidth=s.width||0,i.rightWidth=o.width||0,i.threshold=t.getDataset().threshold}function N(t,e,s){var o=e.getState(),i=o.leftWidth,n=o.rightWidth,a="";switch(o.isopen=o.isopen?o.isopen:"none",t){case"left":a=i;break;case"right":a=-n;break;default:a=0}o.isopen!==t&&(o.throttle=!0,s.callMethod("change",{open:t})),o.isopen=t,e.requestAnimationFrame((function(){e.addClass("ani"),L(a,e)}))}function O(t){var e=t.getState();e.direction="",e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0}function Y(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=!0,o=0;o<e.length-1;o++)if(t.indexOf(e[o])>0){s=!1;break}return s}"object"==typeof window&&(F=!0);var P=!1;const j={showWatch:function(t,e,s,o){var i=o.getState();W(o,s),t&&"none"!==t?N(t,o,s):(i.left&&N("none",o,s),O(o))},touchstart:X,touchmove:A,touchend:D,mousedown:function(t,e){F&&Y()&&(X(t,e),P=!0)},mousemove:function(t,e){F&&Y()&&P&&A(t)},mouseup:function(t,e){F&&Y()&&(D(t,e),P=!1)},mouseleave:function(t,e){F&&Y()&&(P=!1)}},R=t=>{t.$wxs||(t.$wxs=[]),t.$wxs.push("wxsswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.wxsswipe=j}})},I={showWatch(t,e,s,o,i){var n=i.state;(s.$el||s.$vm&&s.$vm.$el)&&(this.getDom(o,s,i),t&&"none"!==t?this.openState(t,o,s,i):(n.left&&this.openState("none",o,s,i),this.resetTouchStatus(o,i)))},touchstart(t,e,s){let o=t.instance,i=o.getDataset().disabled,n=s.state;this.getDom(o,e,s),i=this.getDisabledType(i),i||(o.requestAnimationFrame((function(){o.removeClass("ani"),e.callMethod("closeSwipe")})),n.x=n.left||0,this.stopTouchStart(t,e,s))},touchmove(t,e,s){let o=t.instance;if(!o)return;let i=o.getDataset().disabled,n=s.state;if(i=this.getDisabledType(i),i)return;if(this.stopTouchMove(t,s),"horizontal"!==n.direction)return;t.preventDefault&&t.preventDefault();let a=n.x+n.deltaX;this.move(a,o,e,s)},touchend(t,e,s){let o=t.instance,i=o.getDataset().disabled,n=s.state;i=this.getDisabledType(i),i||this.moveDirection(n.left,o,e,s)},move(t,e,s,o){t=t||0;let i=o.state,n=i.leftWidth,a=i.rightWidth;i.left=this.range(t,-a,n),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+i.left+"px)","-webkit-transform":"translateX("+i.left+"px)"})}))},getDom(t,e,s){var o=s.state,i=e.$el||e.$vm&&e.$vm.$el,n=i.querySelector(".button-group--left"),a=i.querySelector(".button-group--right");o.leftWidth=n.offsetWidth||0,o.rightWidth=a.offsetWidth||0,o.threshold=t.getDataset().threshold},getDisabledType:t=>("string"==typeof t?JSON.parse(t):t)||!1,range:(t,e,s)=>Math.min(Math.max(t,e),s),moveDirection(t,e,s,o){var i=o.state,n=i.threshold;i.position;var a=i.isopen||"none",l=i.leftWidth,r=i.rightWidth;0!==i.deltaX?"none"===a&&r>0&&-t>n||"none"!==a&&r>0&&r+t<n?this.openState("right",e,s,o):"none"===a&&l>0&&t>n||"none"!==a&&l>0&&l-t<n?this.openState("left",e,s,o):this.openState("none",e,s,o):this.openState("none",e,s,o)},openState(t,e,s,o){let i=o.state,n=i.leftWidth,a=i.rightWidth,l="";switch(i.isopen=i.isopen?i.isopen:"none",t){case"left":l=n;break;case"right":l=-a;break;default:l=0}i.isopen!==t&&(i.throttle=!0,s.callMethod("change",{open:t})),i.isopen=t,e.requestAnimationFrame((()=>{e.addClass("ani"),this.move(l,e,s,o)}))},getDirection:(t,e)=>t>e&&t>10?"horizontal":e>t&&e>10?"vertical":"",resetTouchStatus(t,e){let s=e.state;s.direction="",s.deltaX=0,s.deltaY=0,s.offsetX=0,s.offsetY=0},stopTouchStart(t,e,s){let o=t.instance,i=s.state;this.resetTouchStatus(o,s);var n=t.touches[0];i.startX=n.clientX,i.startY=n.clientY},stopTouchMove(t,e){t.instance;let s=e.state,o=t.touches[0];s.deltaX=o.clientX-s.startX,s.deltaY=o.clientY-s.startY,s.offsetY=Math.abs(s.deltaY),s.offsetX=Math.abs(s.deltaX),s.direction=s.direction||this.getDirection(s.offsetX,s.offsetY)}},z={mounted(t,e,s){this.state={}},methods:{showWatch(t,e,s,o){I.showWatch(t,e,s,o,this)},touchstart(t,e){I.touchstart(t,e,this)},touchmove(t,e){I.touchmove(t,e,this)},touchend(t,e){I.touchend(t,e,this)}}},q=t=>{t.$renderjs||(t.$renderjs=[]),t.$renderjs.push("renderswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.renderswipe=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),t.mixins.push(z)},B={mixins:[$,{},{}],emits:["click","change"],props:{show:{type:String,default:"none"},disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},threshold:{type:Number,default:20},leftOptions:{type:Array,default:()=>[]},rightOptions:{type:Array,default:()=>[]}},unmounted(){this.__isUnmounted=!0,this.uninstall()},methods:{uninstall(){this.swipeaction&&this.swipeaction.children.forEach(((t,e)=>{t===this&&this.swipeaction.children.splice(e,1)}))},getSwipeAction(t="uniSwipeAction"){let e=this.$parent,s=e.$options.name;for(;s!==t;){if(e=e.$parent,!e)return!1;s=e.$options.name}return e}}};R(B),q(B);const E=x(B,[["render",function(f,m,g,_,b,y){const w=u,v=p;return t(),e(v,{class:"uni-swipe"},{default:s((()=>[o(v,{class:"uni-swipe_box","change:prop":f.wxsswipe.showWatch,prop:f.is_show,"data-threshold":g.threshold,"data-disabled":g.disabled,onTouchstart:f.wxsswipe.touchstart,onTouchmove:f.wxsswipe.touchmove,onTouchend:f.wxsswipe.touchend},{default:s((()=>[o(v,{class:"uni-swipe_button-group button-group--left"},{default:s((()=>[i(f.$slots,"left",{},(()=>[(t(!0),n(a,null,l(g.leftOptions,((i,n)=>(t(),e(v,{key:n,style:r({backgroundColor:i.style&&i.style.backgroundColor?i.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:f.appTouchStart,onTouchend:t=>f.appTouchEnd(t,n,i,"left"),onClick:c((t=>f.onClickForPC(n,i,"left")),["stop"])},{default:s((()=>[o(w,{class:"uni-swipe_button-text",style:r({color:i.style&&i.style.color?i.style.color:"#FFFFFF",fontSize:i.style&&i.style.fontSize?i.style.fontSize:"16px"})},{default:s((()=>[h(d(i.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3}),o(v,{class:"uni-swipe_text--center"},{default:s((()=>[i(f.$slots,"default",{},void 0,!0)])),_:3}),o(v,{class:"uni-swipe_button-group button-group--right"},{default:s((()=>[i(f.$slots,"right",{},(()=>[(t(!0),n(a,null,l(g.rightOptions,((i,n)=>(t(),e(v,{key:n,style:r({backgroundColor:i.style&&i.style.backgroundColor?i.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:f.appTouchStart,onTouchend:t=>f.appTouchEnd(t,n,i,"right"),onClick:c((t=>f.onClickForPC(n,i,"right")),["stop"])},{default:s((()=>[o(w,{class:"uni-swipe_button-text",style:r({color:i.style&&i.style.color?i.style.color:"#FFFFFF",fontSize:i.style&&i.style.fontSize?i.style.fontSize:"16px"})},{default:s((()=>[h(d(i.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3})])),_:3},8,["change:prop","prop","data-threshold","data-disabled","onTouchstart","onTouchmove","onTouchend"])])),_:3})}],["__scopeId","data-v-b1cd6dff"]]);const J=x({name:"uniSwipeAction",data:()=>({}),created(){this.children=[]},methods:{resize(){},closeAll(){this.children.forEach((t=>{t.is_show="none"}))},closeOther(t){this.openItem&&this.openItem!==t&&(this.openItem.is_show="none"),this.openItem=t}}},[["render",function(o,n,a,l,r,c){const h=p;return t(),e(h,null,{default:s((()=>[i(o.$slots,"default")])),_:3})}]]),V="/assets/delete.c5fc3bf6.svg";var U=f.importObject("businessCloudObject");const G=x({name:"memberList",data:()=>({meberList:[],deleteRemarkFlag:!0,delteIndex:0}),props:{isActive:Number,searchValue:String,type:String,isFirstFlag:Boolean,currentNum:Number,page:Number},onLoad(t){},created(){if("home"===this.type)this.getMemberList(this.isActive);let t=this;m({key:"isActive",success:function(e){e.data&&t.getMemberList(e.data)},fail:function(t){}})},onShow(){},computed:{needFlag(){let t=!1;return 0===this.meberList.length&&(t=!0),console.log(t," LLLLL"),t}},watch:{meberList:{handler:function(t,e){this.$emit("getMemberList",t)},immediate:!0},isActive:{handler:function(t,e){"home"===this.type&&this.getMemberList(t)},immediate:!0},searchValue:{handler:function(t,e){if("detail"===this.type){if(!t)return void(this.meberList=[]);console.log(t,">>>>"),t&&T(this.searchMemberList(t),300)}},deep:!0}},methods:{close(){this.$refs.popup.close()},jumpPhysicalAssessment(t){g({url:"/pages/physicalAssessment/physicalAssessment?traineeNo="+t._id,success:t=>{},fail:()=>{},complete:()=>{}})},searchMemberList(t){U.getMoreList(t).then((t=>{console.log(t,"meberListRes"),this.meberList=t.data.map((t=>({...t,isOpened:"none"})))||[]})).catch((t=>{}))},sureDeleteConfirm(){U.removeMember(this.meberList[this.delteIndex]).then((t=>{t.success&&(_({icon:"success",title:t.message,duration:800}),"detail"===this.type?this.searchValue?this.searchMemberList(this.searchValue):this.meberList=[]:this.getMemberList(this.isActive),this.$refs.popup.close())})).catch((t=>{_({icon:"fail",title:t.message,duration:800})}))},updateMember(t){g({url:"/pages/addMyMebers/addMyMebers?item="+JSON.stringify(t)+"&isActive="+this.isActive,success:t=>{},fail:()=>{},complete:()=>{}});try{b("isActive",this.isActive)}catch(e){}},memberSrollTop(t){this.scrollTop=t.detail.scrollTop,this.cellingFlag=this.scrollTop>50},getMemberList(t){let e=this;this.$nextTick((()=>{U.getMemberList(t).then((t=>{console.log(t,"meberListRes");let s=t.data.map((t=>({...t,isOpened:"none"})))||[];e.$set(e,"meberList",s),console.log(e.meberList,"?????"),e.$forceUpdate()})).catch((t=>{}))}))},bindClick(t){console.log("你好"),this.$refs.popup.open()},swipeChange(t,e){this.delteIndex=e,console.log("当前状态："+t+"，下标："+e)},goToTrainingRecord(t){g({url:`/pages/trainingRecord/trainingRecord?traineeNo=${t._id}&memberName=${t.traineeName}`})},goToNewWorkout(t){g({url:`/pages/newWorkout/newWorkout?traineeNo=${t._id}&memberName=${t.traineeName}`})},getReport(t){y({url:"/pages/viewReport/viewReport?traineeNo="+t._id+"&key=2"})}}},[["render",function(i,r,f,m,g,_){const b=u,y=v,x=p,T=S(k("uni-popup"),C),$=S(k("uni-swipe-action-item"),E),M=S(k("uni-swipe-action"),J);return t(),e(x,{class:"mebers_content"},{default:s((()=>[o(T,{class:"updatePopup",ref:"popup",type:"center"},{default:s((()=>[o(x,{class:"mask_popup_style"},{default:s((()=>[o(x,{class:"confirm_dakuang_style"},{default:s((()=>[o(x,{class:"confirm_top_style"},{default:s((()=>[o(b,{class:"config_top_title_style"},{default:s((()=>[h("是否确认删除")])),_:1}),o(y,{class:"delete_waring_style",src:V})])),_:1}),o(x,{class:"delet_remark"},{default:s((()=>[h("确认删除该学员吗？删除后无法恢复")])),_:1}),o(x,{class:"delete_btn_style"},{default:s((()=>[o(x,{class:"delete_cacel_style",onClick:c(_.close,["stop"])},{default:s((()=>[h("取消")])),_:1},8,["onClick"]),o(x,{class:"delete_sure_style",onClick:c(_.sureDeleteConfirm,["stop"])},{default:s((()=>[h("确认")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},512),_.needFlag?(t(),e(x,{key:0,class:"no_data_style"},{default:s((()=>["home"===f.type?(t(),e(y,{key:0,class:"no_data_meber_img_style",src:"/assets/nomebers.693068cb.png"})):w("",!0),"detail"===f.type&&f.isFirstFlag?(t(),e(y,{key:1,class:"no_data_meber_img_style",src:"/assets/searchNoData.1115fff1.png"})):w("",!0),o(x,{class:"quckliy_add_style"},{default:s((()=>[h(d("home"===f.type?"快去添加第一个学员吧":f.isFirstFlag?"什么内容都没搜到":""),1)])),_:1})])),_:1})):(t(!0),n(a,{key:1},l(g.meberList,((i,n)=>(t(),e(M,{class:"slide_stylle",key:"itemIndex"+n},{default:s((()=>[o($,{show:i.isOpened,"auto-close":!1,onChange:t=>_.swipeChange(t,n,i)},{right:s((()=>[o(x,{class:"slot-button",onClick:r[0]||(r[0]=c((t=>_.bindClick(t)),["stop"]))},{default:s((()=>[o(y,{class:"slot_btn_img_style",src:V})])),_:1})])),default:s((()=>[o(x,{class:"add_student_style"},{default:s((()=>[o(x,{class:"need_loop_style"},{default:s((()=>[o(x,{class:"loop_top_style"},{default:s((()=>[o(x,{class:"top_left_style"},{default:s((()=>[o(b,{class:"top_left_name_style"},{default:s((()=>[h(d(i.traineeName),1)])),_:2},1024),1==i.gender?(t(),e(y,{key:0,class:"top_left_img_style",src:"/assets/man.6d09daac.svg"})):w("",!0),2==i.gender?(t(),e(y,{key:1,class:"top_left_img_style",src:"/assets/woman.0fcc11ce.svg"})):w("",!0)])),_:2},1024),o(x,{class:"top_right_style",onClick:c((t=>_.goToNewWorkout(i)),["stop"])},{default:s((()=>[o(y,{class:"top_right_img_style",src:"/assets/trainingProgram.91678645.svg"}),o(b,null,{default:s((()=>[h("生成训练计划")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),o(x,{class:"loop_bottom_style"},{default:s((()=>[o(x,{class:"bottom_style",onClick:c((t=>_.getReport(i)),["stop"])},{default:s((()=>[o(y,{class:"bootom_img_style",src:"/assets/meberMessage.9f990766.svg"}),o(b,{class:"message_style"},{default:s((()=>[h("会员信息")])),_:1})])),_:2},1032,["onClick"]),o(x,{class:"bottom_style",onClick:c((t=>_.jumpPhysicalAssessment(i)),["stop"])},{default:s((()=>[o(y,{class:"bootom_img_style",src:"/assets/evaluationInformation.c46e2362.svg"}),o(b,{class:"message_style"},{default:s((()=>[h("评测信息")])),_:1})])),_:2},1032,["onClick"]),o(x,{class:"bottom_style",onClick:c((t=>_.goToTrainingRecord(i)),["stop"])},{default:s((()=>[o(y,{class:"bootom_img_style",src:"/assets/trainingLog.2e8241c4.svg"}),o(b,{class:"message_style"},{default:s((()=>[h("训练记录")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["show","onChange"])])),_:2},1024)))),128))])),_:1})}],["__scopeId","data-v-5287753a"]]);export{G as M};
