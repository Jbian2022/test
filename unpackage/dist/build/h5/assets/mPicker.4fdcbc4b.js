import{_ as e}from"./uni-transition.c98c413f.js";import{o as t,a as s,w as a,x as o,b as i,n as l,r as n,d as r,t as d,A as c,B as u,F as h,v as p,i as m,P as f,Q as y}from"./index.2d1e5cbb.js";import{r as k}from"./uni-app.es.142f3165.js";import{_ as g}from"./_plugin-vue_export-helper.cdc0426e.js";const b={mark:{type:Boolean,default:()=>!0},markClose:{type:Boolean,default:()=>!0},btnClose:{type:Boolean,default:()=>!0},show:{type:Boolean,default:()=>!1},range:{type:Array,default:[]},rangeKey:{type:String,default:"label"},indicatorStyle:{type:String,default:"height: 50px;"},indicatorClass:{type:String,default:""},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确定"},cancelStyle:{type:Object,default:{}},confirmStyle:{type:Object,default:{}},height:{type:Number,default:500},borderRadius:{type:Number,default:16},bgColor:{type:String,default:"#383d46"},markBgColor:{type:String,default:"#00000080"},mode:{type:String,default:"bottom"},pickerType:{type:String,default:"ordinary"},defaultIndex:{type:Number,default:0},distinguishModel:{type:String,default:""}},x=new Date,_=[],C=x.getFullYear(),v=[],S=x.getMonth()+1,M=[],T=x.getDate();for(let B=1770;B<=x.getFullYear();B++)_.push(B);for(let B=1;B<=12;B++)v.push(B);for(let B=1;B<=31;B++)M.push(B);const w=g({name:"jarvis-picker",props:b,data:()=>({pickerValue:[],pickMove:!1,opearRange:[],years:_,year:C,months:v,month:S,days:M,day:T,value:[9999,S-1,T-1],visible:!0,valueModel:""}),computed:{model(){return"top"==this.mode?"top":"bottom"==this.mode?"bottom":"center"==this.mode?"center":"bottom"},stylesMark(){return{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99,backgroundColor:this.markBgColor}},styles(){const e={position:"fixed",left:0,right:0,bottom:0,zIndex:100};return"top"==this.model?{position:"fixed",left:0,right:0,top:0,zIndex:100}:"bottom"==this.model?e:"center"==this.model?{position:"fixed",left:"50%",top:"50%",width:"90vw",transform:"translate(-50%, -50%)",zIndex:100}:e},radius(){const e=this.borderRadius;return"top"==this.model?[0,0,e,e]:"bottom"==this.model?[e,e,0,0]:"center"==this.model?[e,e,e,e]:[0,0,0,0]},modeClass(){return"top"==this.model?["fade","slide-top"]:"bottom"==this.model?["fade","slide-bottom"]:"center"==this.model?"fade":["fade","slide-bottom"]}},watch:{range:{handler:function(e,t){this.opearRange=[e]},immediate:!0},distinguishModel:{handler:function(e,t){if(e){let t=e.split("-"),s=this.years.findIndex((e=>e==t[0])),a=this.months.findIndex((e=>e==t[1])),o=this.days.findIndex((e=>e==t[2]));this.pickerValue=[s,a,o]}else this.pickerValue=[9999,this.month-1,this.day-1]},deep:!0,immediate:!0}},mounted(){this.$nextTick((()=>{"ordinary"===this.pickerType&&(this.pickerValue=[this.defaultIndex])}))},methods:{close(){this.pickMove||this.$emit("update:show",!1)},cancel(){this.$emit("cancel"),this.btnClose&&this.close()},confirm(){"ordinary"===this.pickerType?(console.log(this.pickerValue.Target,"this.pickerValue"),this.$emit("confirm",this.pickerValue),this.btnClose&&this.close()):(this.$emit("confirm",this.valueModel),this.btnClose&&this.close())},clickMark(){this.markClose&&this.close()},bindChange(e){console.log(e,">>>>>");const t=e.detail.value;"ordinary"===this.pickerType?this.pickerValue=t:(this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]],this.valueModel=this.year+"-"+this.month+"-"+this.day,console.log(this.year,this.month,this.day))},pickstart(){this.pickMove=!0},pickend(){this.pickMove=!1}}},[["render",function(g,b,x,_,C,v){const S=k(p("uni-transition"),e),M=m,T=f,w=y;return t(),s(M,{class:"pricke"},{default:a((()=>[g.mark?(t(),s(S,{key:0,ref:"aniMark","custom-class":"transition","mode-class":"fade",styles:v.stylesMark,show:g.show,onClick:v.clickMark},null,8,["styles","show","onClick"])):o("",!0),i(S,{ref:"ani","custom-class":"transition","mode-class":v.modeClass,styles:v.styles,show:g.show},{default:a((()=>[i(M,{class:"m-picker"},{default:a((()=>[i(M,{class:"m-picker__case",style:l({background:g.bgColor,borderTopLeftRadius:v.radius[0]+"rpx",borderTopRightRadius:v.radius[1]+"rpx",borderBottomLeftRadius:v.radius[2]+"rpx",borderBottomRightRadius:v.radius[3]+"rpx",paddingBottom:"bottom"==v.model?"calc(constant(safe-area-inset-bottom) + 30rpx)":"30rpx",paddingBottom:"bottom"==v.model?"calc(env(safe-area-inset-bottom) + 30rpx)":"30rpx"})},{default:a((()=>["bottom"==v.model?n(g.$slots,"handle",{key:0},(()=>[i(M,{class:"handle"},{default:a((()=>[i(M,{class:"button cancel",style:l(g.cancelStyle),onClick:v.cancel},{default:a((()=>[r(d(g.cancelText),1)])),_:1},8,["style","onClick"]),i(M,{class:"button confirm",style:l(g.confirmStyle),onClick:v.confirm},{default:a((()=>[r(d(g.confirmText),1)])),_:1},8,["style","onClick"])])),_:1})]),!0):o("",!0),n(g.$slots,"default",{},(()=>[i(M,{class:"content",style:l({height:`${g.height}rpx`})},{default:a((()=>[i(w,{class:"picker-view","indicator-class":g.indicatorClass,"indicator-style":g.indicatorStyle,value:C.pickerValue,onChange:v.bindChange,onPickstart:v.pickstart,onPickend:v.pickend},{default:a((()=>["ordinary"===g.pickerType?(t(!0),c(h,{key:0},u(C.opearRange,((e,o)=>(t(),s(T,{key:o},{default:a((()=>[(t(!0),c(h,null,u(e,((e,o)=>(t(),s(M,{class:"picker-view__item",key:o},{default:a((()=>[r(d(e[g.rangeKey]),1)])),_:2},1024)))),128))])),_:2},1024)))),128)):o("",!0),"date"===g.pickerType?(t(),c(h,{key:1},[i(T,null,{default:a((()=>[(t(!0),c(h,null,u(C.years,((e,o)=>(t(),s(M,{class:"item",key:o},{default:a((()=>[r(d(e)+"年",1)])),_:2},1024)))),128))])),_:1}),i(T,null,{default:a((()=>[(t(!0),c(h,null,u(C.months,((e,o)=>(t(),s(M,{class:"item",key:o},{default:a((()=>[r(d(e)+"月",1)])),_:2},1024)))),128))])),_:1}),i(T,null,{default:a((()=>[(t(!0),c(h,null,u(C.days,((e,o)=>(t(),s(M,{class:"item",key:o},{default:a((()=>[r(d(e)+"日",1)])),_:2},1024)))),128))])),_:1})],64)):o("",!0)])),_:1},8,["indicator-class","indicator-style","value","onChange","onPickstart","onPickend"])])),_:1},8,["style"])]),!0),"bottom"!=v.model?n(g.$slots,"handle",{key:1},(()=>[i(M,{class:"handle"},{default:a((()=>[i(M,{class:"button cancel",style:l(g.cancelStyle),onClick:v.cancel},{default:a((()=>[r(d(g.cancelText),1)])),_:1},8,["style","onClick"]),i(M,{class:"button confirm",style:l(g.confirmStyle),onClick:v.confirm},{default:a((()=>[r(d(g.confirmText),1)])),_:1},8,["style","onClick"])])),_:1})]),!0):o("",!0)])),_:3},8,["style"])])),_:3})])),_:3},8,["mode-class","styles","show"])])),_:3})}],["__scopeId","data-v-d568fd46"]]);export{w as M};
