import{E as a,a0 as e,N as t,a1 as s,a2 as l,V as c,J as d,a3 as n,o as u,a as i,w as o,i as f,b as r,d as m,e as p,t as _,A as g,B as h,F as k,q as y,v as b,p as x,C as I}from"./index.3c07bbe7.js";import{_ as L}from"./uni-popup.159bf41e.js";import{r as v}from"./uni-app.es.2e9f864b.js";import{h as D}from"./html2canvas.esm.1306abbd.js";import{_ as T}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-transition.23e18650.js";const w={methods:{generateImage(a){setTimeout((()=>{const e=document.getElementById("training-detail");D(e,{width:e.clientWidth,height:e.clientHeight,scrollY:0,scrollX:0,useCORS:!0}).then((e=>{const t=e.toDataURL("image/png");a&&a(t)})).catch((a=>{}))}),300)},updateEcharts(a,e,t,s){a&&this.generateImage((e=>{t.callMethod("receiveRenderData",{name:a,base64:e})}))}}},C=a=>{a.$renderjs||(a.$renderjs=[]),a.$renderjs.push("canvasImage"),a.mixins||(a.mixins=[]),a.mixins.push({beforeCreate(){this.canvasImage=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),a.mixins.push(w)},N=a.importObject("train"),j={data:()=>({options:[{name:"分享到微信",icon:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/23704d74-641b-4a8e-9ced-f393c631667a.png"},{name:"分享到朋友圈",icon:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/4be11f14-035d-47f0-8c5d-f147b494246b.png"},{name:"保存到相册",icon:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/c5edf505-9026-4d72-a16c-3ea5c8e4304c.png"}],traineeTitle:"",trainDate:"",sumLoad:0,trainInfoList:[],baseUrl:null,url:null,canvasImageMsg:null,isFixedTop:!1}),onLoad:function(a){a.traineeNo&&(this.traineeNo=a.traineeNo,this.trainDate=a.trainDate,this.getTrainInfo())},onPageScroll(a){a.scrollTop>e().statusBarHeight?this.isFixedTop=!0:this.isFixedTop=!1},methods:{async getTrainInfo(){const a=await N.getTrainList({traineeNo:this.traineeNo,trainDate:this.trainDate});if(a.data&&a.data.length>0){const{trainContent:e,traineeTitle:t}=a.data[0];this.traineeTitle=t,this.trainInfoList=JSON.parse(e),this.sumLoad=this.trainInfoList.reduce((function(a,e){return+e.load+ +a}),0)}},onClickLeft(){t()},formaterTimes(a,e=3){const t=Math.floor(a/3600),s=Math.floor((a-3600*t)/60);return 3===e?t+"时"+s+"分"+(a-3600*t-60*s)+"秒":t+"时"+s+"分"},getMonthDay(a){const e=a=>a<10?"0"+a:a,t=new Date(a);t.getFullYear();return e(t.getMonth()+1)+"."+e(t.getDate())},getweekday:a=>new Array("日","一","二","三","四","五","六")[new Date(a).getDay()],onSelect(a){console.log(a,88),this.canvasImageMsg=a.name},async uploadImage(a){const e=await N.uploadBase64({base64:this.baseUrl});this.url=e.fileID,this.canvasImageMsg=null,a&&a(this.url)},downloadFile(){s({url:this.url,success:a=>{200===a.statusCode&&(console.log("下载成功",a),l({filePath:a.tempFilePath,success:a=>{console.log("保存成功！",a),c(),d({showCancel:!1,title:"提示",content:"图片已经保存到相册请查看",success:function(a){a.confirm?console.log("用户点击确定"):a.cancel&&console.log("用户点击取消")}})},fail:a=>{console.log("err",a)}}))}})},receiveRenderData(a){this.$refs.popup.close(),console.log(a.name,8888),this.baseUrl=a.base64,this.uploadImage((a=>{n({title:"加载中"})}))},openPopup(){this.$refs.popup.open()}}};C(j);const M=T(j,[["render",function(a,e,t,s,l,c){const d=y("van-icon"),n=f,D=y("van-image"),T=I,w=v(b("uni-popup"),L);return u(),i(n,{class:"training-record-detail"},{default:o((()=>[r(n,{class:p(["arrow-left",{show:l.isFixedTop}]),onClick:c.onClickLeft},{default:o((()=>[r(d,{name:"arrow-left"}),r(n,{class:"title"},{default:o((()=>[m("训练记录")])),_:1}),r(n,{class:"z",style:{opacity:"0"}},{default:o((()=>[m("8888")])),_:1})])),_:1},8,["class","onClick"]),r(n,{id:"training-detail"},{default:o((()=>[r(n,{class:"status_bar"}),r(n,{class:"backgroud-img"},{default:o((()=>[r(D,{src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/6b1a6145-faf2-4eb1-a710-4e41ff2ca19b.png"})])),_:1}),r(n,{class:"first-title-times"},{default:o((()=>[r(n,{class:"title"},{default:o((()=>[m(_(l.traineeTitle),1)])),_:1}),r(n,{class:"times"},{default:o((()=>[m(_(c.getMonthDay(l.trainDate)),1)])),_:1})])),_:1}),r(n,{class:"second-title-day"},{default:o((()=>[r(n,{class:"title"},{default:o((()=>[m("总负荷量："+_(l.sumLoad)+"kg",1)])),_:1}),r(n,{class:"day"},{default:o((()=>[m("星期"+_(c.getweekday(l.trainDate)),1)])),_:1})])),_:1}),r(n,{class:"info-list"},{default:o((()=>[(u(!0),g(k,null,h(l.trainInfoList,((a,e)=>(u(),i(n,{key:e},{default:o((()=>[0===a.type?(u(),i(n,{key:0,class:"info-item"},{default:o((()=>[r(n,{class:"item-header"},{default:o((()=>[r(n,{class:"img"},{default:o((()=>[a.url?(u(),i(D,{key:0,round:"",src:a.url},null,8,["src"])):(u(),i(D,{key:1,round:"",src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/f1ecf80b-cf75-4017-9ae2-622fe72717e9.png"}))])),_:2},1024),r(n,{class:"des-info"},{default:o((()=>[r(n,{class:"des-title"},{default:o((()=>[m(_(a.actionName),1)])),_:2},1024),r(n,{class:"info-text"},{default:o((()=>[r(T,null,{default:o((()=>[m("负荷量："+_(a.load)+"kg",1)])),_:2},1024),r(T,null,{default:o((()=>[m("已完成："+_(a.frequency)+"次",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(n,{class:"detailed-data"},{default:o((()=>[(u(!0),g(k,null,h(a.groupList,((a,e)=>(u(),i(n,{key:e,class:"data-item"},{default:o((()=>[r(n,{class:"index"},{default:o((()=>[m(_(e+1),1)])),_:2},1024),r(n,{class:"data-info"},{default:o((()=>[r(n,{class:"kg"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.kg),1)])),_:2},1024),r(T,null,{default:o((()=>[m("kg")])),_:1})])),_:2},1024),r(n,{class:"x"},{default:o((()=>[m(" x ")])),_:1}),r(n,{class:"time"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.time),1)])),_:2},1024),r(T,null,{default:o((()=>[m("次")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0),1===a.type?(u(),i(n,{key:1,class:"info-item"},{default:o((()=>[r(n,{class:"item-header"},{default:o((()=>[r(n,{class:"img"},{default:o((()=>[a.url?(u(),i(D,{key:0,round:"",src:a.url},null,8,["src"])):(u(),i(D,{key:1,round:"",src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/f1ecf80b-cf75-4017-9ae2-622fe72717e9.png"}))])),_:2},1024),r(n,{class:"des-info"},{default:o((()=>[r(n,{class:"des-title"},{default:o((()=>[m(_(a.actionName),1)])),_:2},1024),r(n,{class:"info-text"},{default:o((()=>[r(T,null,{default:o((()=>[m("总里程："+_(a.mileage)+"km",1)])),_:2},1024),r(T,null,{default:o((()=>[m("用时："+_(c.formaterTimes(a.times)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(n,{class:"detailed-data"},{default:o((()=>[(u(!0),g(k,null,h(a.groupList,((a,e)=>(u(),i(n,{key:e,class:"data-item"},{default:o((()=>[r(n,{class:"index"},{default:o((()=>[m(_(e+1),1)])),_:2},1024),r(n,{class:"data-info-km"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.km),1)])),_:2},1024),r(T,null,{default:o((()=>[m("km")])),_:1})])),_:2},1024),r(n,{class:"data-info-time"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.hour>=10?a.hour:"0"+a.hour)+":"+_(a.minute>=10?a.minute:"0"+a.minute)+":"+_(a.second>=10?a.second:"0"+a.second),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0),2===a.type?(u(),i(n,{key:2,class:"info-item"},{default:o((()=>[r(n,{class:"item-header"},{default:o((()=>[r(n,{class:"img"},{default:o((()=>[a.url?(u(),i(D,{key:0,round:"",src:a.url},null,8,["src"])):(u(),i(D,{key:1,round:"",src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/f1ecf80b-cf75-4017-9ae2-622fe72717e9.png"}))])),_:2},1024),r(n,{class:"des-info"},{default:o((()=>[r(n,{class:"des-title"},{default:o((()=>[m(_(a.actionName),1)])),_:2},1024),r(n,{class:"info-text"},{default:o((()=>[r(T,null,{default:o((()=>[m("已完成："+_(a.frequency)+"次",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(n,{class:"detailed-data"},{default:o((()=>[(u(!0),g(k,null,h(a.groupList,((a,e)=>(u(),i(n,{key:e,class:"data-item"},{default:o((()=>[r(n,{class:"index"},{default:o((()=>[m(_(e+1),1)])),_:2},1024),r(n,{class:"data-info"},{default:o((()=>[r(n,{class:"time"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.time),1)])),_:2},1024),r(T,null,{default:o((()=>[m("次")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0),3===a.type?(u(),i(n,{key:3,class:"info-item"},{default:o((()=>[r(n,{class:"item-header"},{default:o((()=>[r(n,{class:"img"},{default:o((()=>[a.url?(u(),i(D,{key:0,round:"",src:a.url},null,8,["src"])):(u(),i(D,{key:1,round:"",src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/f1ecf80b-cf75-4017-9ae2-622fe72717e9.png"}))])),_:2},1024),r(n,{class:"des-info"},{default:o((()=>[r(n,{class:"des-title"},{default:o((()=>[m(_(a.actionName),1)])),_:2},1024),r(n,{class:"info-text"},{default:o((()=>[r(T,null,{default:o((()=>[m("总用时："+_(c.formaterTimes(a.times)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(n,{class:"detailed-data"},{default:o((()=>[(u(!0),g(k,null,h(a.groupList,((a,e)=>(u(),i(n,{key:e,class:"data-item"},{default:o((()=>[r(n,{class:"index"},{default:o((()=>[m(_(e+1),1)])),_:2},1024),r(n,{class:"data-info"},{default:o((()=>[r(n,{class:"time"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.hour>=10?a.hour:"0"+a.hour)+":"+_(a.minute>=10?a.minute:"0"+a.minute)+":"+_(a.second>=10?a.second:"0"+a.second),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0),4===a.type?(u(),i(n,{key:4,class:"info-item"},{default:o((()=>[r(n,{class:"item-header"},{default:o((()=>[r(n,{class:"img"},{default:o((()=>[a.url?(u(),i(D,{key:0,round:"",src:a.url},null,8,["src"])):(u(),i(D,{key:1,round:"",src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/f1ecf80b-cf75-4017-9ae2-622fe72717e9.png"}))])),_:2},1024),r(n,{class:"des-info"},{default:o((()=>[r(n,{class:"des-title"},{default:o((()=>[m(_(a.actionName),1)])),_:2},1024),r(n,{class:"info-text"},{default:o((()=>[r(T,null,{default:o((()=>[m("负荷量："+_(a.load)+"kg",1)])),_:2},1024),r(T,null,{default:o((()=>[m("已完成："+_(a.frequency)+"次",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(n,{class:"detailed-data"},{default:o((()=>[(u(!0),g(k,null,h(a.groupList,((a,e)=>(u(),i(n,{key:e,class:"data-item"},{default:o((()=>[r(n,{class:"index"},{default:o((()=>[m(_(e+1),1)])),_:2},1024),r(n,{class:"data-info"},{default:o((()=>[r(n,{class:"kg"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.kg),1)])),_:2},1024),r(T,null,{default:o((()=>[m("kg")])),_:1})])),_:2},1024),r(n,{class:"x"},{default:o((()=>[m(" x ")])),_:1}),r(n,{class:"time"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.time),1)])),_:2},1024),r(T,null,{default:o((()=>[m("次")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0),5===a.type?(u(),i(n,{key:5,class:"info-item"},{default:o((()=>[r(n,{class:"item-header"},{default:o((()=>[r(n,{class:"img"},{default:o((()=>[a.url?(u(),i(D,{key:0,round:"",src:a.url},null,8,["src"])):(u(),i(D,{key:1,round:"",src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/f1ecf80b-cf75-4017-9ae2-622fe72717e9.png"}))])),_:2},1024),r(n,{class:"des-info"},{default:o((()=>[r(n,{class:"des-title"},{default:o((()=>[m(_(a.actionName),1)])),_:2},1024),r(n,{class:"info-text"},{default:o((()=>[r(T,null,{default:o((()=>[m("负荷量："+_(a.load)+"kg",1)])),_:2},1024),r(T,null,{default:o((()=>[m("已完成："+_(a.frequency)+"次",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(n,{class:"detailed-data"},{default:o((()=>[(u(!0),g(k,null,h(a.groupList,((a,e)=>(u(),i(n,{key:e,class:"data-item"},{default:o((()=>[r(n,{class:"index"},{default:o((()=>[m(_(e+1),1)])),_:2},1024),r(n,{class:"data-info"},{default:o((()=>[r(n,{class:"kg"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.kg),1)])),_:2},1024),r(T,null,{default:o((()=>[m("kg")])),_:1})])),_:2},1024),r(n,{class:"x"},{default:o((()=>[m(" x ")])),_:1}),r(n,{class:"time"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.time),1)])),_:2},1024),r(T,null,{default:o((()=>[m("次")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0),6===a.type?(u(),i(n,{key:6,class:"info-item"},{default:o((()=>[r(n,{class:"item-header"},{default:o((()=>[r(n,{class:"img"},{default:o((()=>[a.url?(u(),i(D,{key:0,round:"",src:a.url},null,8,["src"])):(u(),i(D,{key:1,round:"",src:"https://mp-4e6f1c48-a4dc-4897-a866-0a1a071023c3.cdn.bspapp.com/cloudstorage/f1ecf80b-cf75-4017-9ae2-622fe72717e9.png"}))])),_:2},1024),r(n,{class:"des-info"},{default:o((()=>[r(n,{class:"des-title"},{default:o((()=>[m(_(a.actionName),1)])),_:2},1024),r(n,{class:"info-text"},{default:o((()=>[r(T,null,{default:o((()=>[m("总用时："+_(c.formaterTimes(a.times)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(n,{class:"detailed-data"},{default:o((()=>[(u(!0),g(k,null,h(a.groupList,((a,e)=>(u(),i(n,{key:e,class:"data-item"},{default:o((()=>[r(n,{class:"index"},{default:o((()=>[m(_(e+1),1)])),_:2},1024),r(n,{class:"data-info"},{default:o((()=>[r(n,{class:"time"},{default:o((()=>[r(T,{class:"num"},{default:o((()=>[m(_(a.hour>=10?a.hour:"0"+a.hour)+":"+_(a.minute>=10?a.minute:"0"+a.minute)+":"+_(a.second>=10?a.second:"0"+a.second),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0)])),_:2},1024)))),128))])),_:1})])),_:1}),r(n,{class:"footer-button"},{default:o((()=>[r(n,{class:"van-button",onClick:c.openPopup},{default:o((()=>[r(n,{class:"share-icon"}),m("炫耀一下")])),_:1},8,["onClick"])])),_:1}),r(n,{prop:l.canvasImageMsg,"change:prop":a.canvasImage.updateEcharts,id:"canvasImage"},null,8,["prop","change:prop"]),r(w,{ref:"popup",type:"bottom","mask-background-color":"rgba(20, 21, 23, 0.6)"},{default:o((()=>[r(n,{class:"share-sheet"},{default:o((()=>[(u(!0),g(k,null,h(l.options,((a,e)=>(u(),i(n,{class:"item",key:e,onClick:e=>c.onSelect(a)},{default:o((()=>[r(D,{class:"img",round:"",src:a.icon},null,8,["src"]),r(n,{class:"text"},{default:o((()=>[m(_(a.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])),_:1})}],["__scopeId","data-v-324c138a"]]);export{M as default};
