import{E as t,a7 as e,V as a,D as s,m as o,o as l,a as n,w as i,i as c,b as r,d as u,A as d,B as p,F as h,n as g,t as f,q as m,u as y,a8 as b,I as C}from"./index.3c07bbe7.js";import{B as _}from"./bgTheamCompontent.b73a7dbd.js";import{N as k}from"./navBarCompontent.f41d0dd4.js";import{d as T}from"./util.18554214.js";import{_ as v}from"./openarrit.1af81aaf.js";import{_ as D}from"./close.d60a6d93.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import"./back.83fd7f48.js";const N=t.importObject("testResults");t.importObject("businessCloudObject");const x=w({setup(){const t=e(!1);return{show:t,showPopup:()=>{t.value=!0},closePopup:()=>{t.value=!1}}},created(){a()},onLoad:function(t){let e=JSON.parse(t.data);this.actionData=e,console.log(this.actionData),this.leftNavTitle=this.actionData.questionContent,this.imgUrl=this.actionData.url,this.videoUrl=this.actionData.answerRemark.url,this.traineeNo=t.traineeNo,this.questionCode=t.questionCode,this.getTraineeInfo()},watch:{resultValue(t,e){T(this.testResult(),300)}},components:{BgTheamCompontent:_,NavBarCompontent:k},data:()=>({gender:"1",age:29,resValue:80,resultValue:"",typeText:"待测",actionData:[],typeColor:"#4B525E",imgUrl:"",leftNavTitle:"",videoUrl:"",traineeNo:"",questionCode:"",restData:[{traineeNo:"",questionCode:"",testResult:[],userId:"",status:"0"}],backgroundColor:"rgba(56,61,70, 1)"}),methods:{async testResult(){const t=this.gender,e=this.age,a=Number(this.resultValue),s=N.method1(t,e,a),o=(await s).data;0==o.length?this.typeText="待测":(this.typeText=o[0].resultLevel,this.levelColor(this.typeText)),console.log(a)},async getTraineeInfo(){const t={};let e="";t.traineeId=this.traineeNo,N.getOnlyList(t).then((t=>{t.success&&(console.log(t.data[0].birthday),this.gender=t.data[0].gender,e=t.data[0].birthday,this.age=Number(this.getAge(e)))}))},getAge(t){t=t.split("-");let e=new Date,a=[e.getFullYear(),e.getMonth()+1,e.getDate()],s=a.map(((e,a)=>e-t[a]));if(s[2]<0){let t=new Date(a[0],a[1],0);s[1]--,s[2]+=t.getDate()}return s[1]<0&&(s[0]--,s[1]+=12),console.log(s[0]+"岁"+s[1]+"月"+s[2]+"天"),s[0]},levelColor(t){switch(t){case"优秀":case"良好":this.typeColor="rgba(1, 224, 140, 1)",this.backgroundColor="rgba(53, 68, 73, 0.5)";break;case"中等":case"中上":case"中下":this.typeColor="rgba(255, 193, 60, 1)",this.backgroundColor="rgba(66, 67, 69, 0.5)";break;case"较差":case"非常差":this.typeColor="rgba(240, 66, 66, 1)",this.backgroundColor="rgba(65, 60, 69, 0.5)";break;default:this.typeColor="rgba(75, 82, 94, 1)"}},actionResDate(){const t={},e={};t.traineeNo=this.traineeNo,t.questionCode=this.questionCode,t.code=this.actionData.code,e.actionVlue=this.resultValue,e.actionTypeText=this.typeText,t.testDate=new Date,t.physicalData=e,t.status="0",console.log(t);const a=N.opearConfig(t,"bodyTestReport").then((t=>{console.log(t,"我要保存了"),t.success&&(s({url:"/pages/physicalFitnessAssessment/physicalFitnessAssessment?traineeNo="+this.traineeNo+"&questionCode="+this.questionCode}),o({icon:"success",title:t.message,duration:800}))})).catch((()=>{}));console.log(a)}}},[["render",function(t,e,a,s,o,_){const k=m("BgTheamCompontent"),T=m("NavBarCompontent"),w=y,N=c,x=b,A=m("van-popup"),B=C,V=m("van-col"),j=m("van-row");return l(),n(N,{class:"content_style"},{default:i((()=>[r(k,{theamType:"currency"}),r(T,{leftNavTitle:o.leftNavTitle},null,8,["leftNavTitle"]),r(N,{class:"body_content",id:"bodycontent"},{default:i((()=>[r(N,{class:"clickAction",onClick:s.showPopup},{default:i((()=>[u("标准动作描述 "),r(w,{src:v})])),_:1},8,["onClick"]),r(A,{show:s.show,"onUpdate:show":e[0]||(e[0]=t=>s.show=t),position:"top",round:"",overlay:!1,class:"clickActionContent"},{default:i((()=>[r(N,{class:"clickActionBody"},{default:i((()=>[r(x,{src:o.videoUrl,wid:"",autoplay:""},null,8,["src"]),r(N,{class:"clickActionText"},{default:i((()=>[r(N,{class:"Actionname"},{default:i((()=>[u("标准动作：")])),_:1}),r(N,null,{default:i((()=>[(l(!0),d(h,null,p(o.actionData.answerRemark.detailArray,((t,e)=>(l(),d("p",null,f(t),1)))),256))])),_:1})])),_:1}),r(N,{class:"clickActionEnd",onClick:s.closePopup},{default:i((()=>[u("收起 "),r(w,{src:D})])),_:1},8,["onClick"])])),_:1})])),_:1},8,["show"]),r(w,{src:o.imgUrl,class:"contentImg"},null,8,["src"]),r(N,{class:"contentBlock"},{default:i((()=>[r(j,null,{default:i((()=>[r(V,{span:"16"},{default:i((()=>["F0001"==o.actionData.code?(l(),n(N,{key:0,class:"testText"},{default:i((()=>[u("请填写心率")])),_:1})):(l(),n(N,{key:1,class:"testText"},{default:i((()=>[u("请填写数量")])),_:1})),r(N,{class:"testInput"},{default:i((()=>[r(N,null,{default:i((()=>[r(B,{class:"inputBlock",type:"number",modelValue:o.resultValue,"onUpdate:modelValue":e[1]||(e[1]=t=>o.resultValue=t),placeholder:"请填写"},null,8,["modelValue"])])),_:1}),"F0001"==o.actionData.code?(l(),n(N,{key:0,class:"inputText"},{default:i((()=>[u("/分")])),_:1})):(l(),n(N,{key:1,class:"inputText"},{default:i((()=>[u("/个")])),_:1}))])),_:1})])),_:1}),r(V,{span:"8"},{default:i((()=>[r(N,{class:"dynamicshow_right"},{default:i((()=>[r(N,{class:"circle",style:g("border: 4px solid "+o.typeColor+";background-color:"+o.backgroundColor+";")},{default:i((()=>[r(N,{class:"circleText",style:g("color:"+o.typeColor+";")},{default:i((()=>[u(f(o.typeText),1)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(N,null,{default:i((()=>[r(N,{class:"postureButton",onClick:e[2]||(e[2]=t=>_.actionResDate())},{default:i((()=>[u("确认")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d498cdf0"]]);export{x as default};
