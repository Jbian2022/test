import{c as e,o as t,a as s,w as l,b as i,r as o,n as a,d as c,e as r,f as n,i as p,s as h,g as d,h as m,E as u,j as f,k as b,l as _,m as g,p as y,t as x,q as v,u as w,S as k,v as L,M as C,x as M}from"./index.3c07bbe7.js";import{_ as $}from"./uni-popup.159bf41e.js";import{r as S}from"./uni-app.es.2e9f864b.js";import{B as j}from"./bgTheamCompontent.b73a7dbd.js";import{M as A}from"./memberList.f4a4b605.js";import{_ as T}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-transition.23e18650.js";import"./util.18554214.js";const z={props:{visible:Boolean,color:{type:String,default:"#303133"},placement:{type:String,default:"top"},content:{type:String,default:""},show:{type:Boolean,default:!1}},data(){return{isShow:this.visible,title:"Hello",arrowLeft:0,query:null,style:{},arrowStyle:{}}},onLoad(){},watch:{isShow:{handler(e){this.$emit("update:visible",e)},immediate:!0},visible:{handler(e){this.isShow=e,e&&this.$nextTick((()=>{this.handleClick()}))},immediate:!0}},mounted(){window.addEventListener("click",(()=>{this.isShow=!1}))},methods:{close(){this.isShow=!1},fixedWrap(){this.isShow=!1},handleClick(){e().in(this).selectAll(".zb_tooltip_content,.zb_tooltip__popper").boundingClientRect((async e=>{let{left:t,bottom:s,right:l,top:i,width:o,height:a}=e[0],c=e[1],r={},n={};switch(this.placement){case"top":c.width>o?r.left=`-${(c.width-o)/2}px`:r.left=Math.abs(c.width-o)/2+"px",r.bottom=`${a+8}px`,n.left=c.width/2-6+"px";break;case"top-start":r.left="0px",r.bottom=`${a+8}px`;break;case"top-end":r.right="0px",r.bottom=`${a+8}px`,n.right="8px";break;case"bottom":c.width>o?r.left=`-${(c.width-o)/2}px`:r.left=Math.abs(c.width-o)/2+"px",r.top=`${a+8}px`,n.left=c.width/2-6+"px";break;case"bottom-start":r.left="0px",r.top=`${a+8}px`,n.left="8px";break;case"bottom-end":r.right="0px",r.top=`${a+8}px`,n.right="8px";break;case"right":r.left=`${o+8}px`,c.height>a?r.top=`-${(c.height-a)/2}px`:r.top=`${Math.abs((c.height-a)/2)}px`,n.top=c.height/2-6+"px";break;case"right-start":r.left=`${o+8}px`,r.top="0px",n.top="8px";break;case"right-end":r.left=`${o+8}px`,r.bottom="0px",n.bottom="8px";break;case"left":r.right=`${o+8}px`,c.height>a?r.top=`-${(c.height-a)/2}px`:r.top=`${Math.abs((c.height-a)/2)}px`,n.top=c.height/2-6+"px";break;case"left-start":r.right=`${o+8}px`,r.top="0px",n.top="8px";break;case"left-end":r.right=`${o+8}px`,r.bottom="0px",n.bottom="8px"}this.style=r,this.arrowStyle=n,this.isShow=!0})).exec()}}};const F=T({components:{BgTheamCompontent:j,MemberList:A,ZbTooltip:T(z,[["render",function(e,h,d,m,u,f){const b=p;return t(),s(b,{class:"zb-tooltip",style:a({"--theme-bg-color":d.color})},{default:l((()=>[i(b,{class:"zb_tooltip_content",onClick:n(f.handleClick,["stop"])},{default:l((()=>[o(e.$slots,"default",{},void 0,!0),i(b,{class:"zb_tooltip__popper",style:a([u.style,{visibility:u.isShow?"visible":"hidden",color:"white"===d.color?"":"#fff"}])},{default:l((()=>[o(e.$slots,"content",{},(()=>[i(b,{class:"remark"},{default:l((()=>[c("Hi~你来了")])),_:1}),i(b,{class:"remark"},{default:l((()=>[c("点这里添加会员吧")])),_:1})]),!0),i(b,{class:r(["zb_popper__icon",[{zb_popper__up:0===d.placement.indexOf("bottom"),zb_popper__arrow:0===d.placement.indexOf("top"),zb_popper__right:0===d.placement.indexOf("right"),zb_popper__left:0===d.placement.indexOf("left")}]]),style:a([u.arrowStyle])},null,8,["style","class"])])),_:3},8,["style"])])),_:3},8,["onClick"])])),_:3},8,["style"])}],["__scopeId","data-v-7f3de387"]])},data:()=>({meberList:[],isActive:1,deleteRemarkFlag:!1,loginNum:0,showPopover:!1,scrollTop:0,cellingFlag:!1,delteIndex:0,avatar:null,addUpperLimit:null,cocahMemberLimit:0,page:10,currentNum:1}),watch:{scrollTop:{}},onLoad(){h()},onPullDownRefresh(){this.$refs.memberList.getMemberList(this.isActive),d()},onReachBottom(){console.log(2222)},created(){},mounted(){let e=this;m({key:"loginNum",success:function(t){t.data&&(e.loginNum=t.data,e.showPopover="0"==t.data,"0"==t.data&&this.$refs.first_popup.open())},fail:function(e){}}),this.getUserInfor()},onShow(){this.getUserInfor()},methods:{getUserInfor(){const e=u.importObject("login");try{e.getUserInfoMessage().then((e=>{console.log(e,"...."),this.avatar=e.userInfo.avatar||null,this.addUpperLimit=e.userInfo.addUpperLimit||null})).catch((e=>{}))}catch(t){}},getCocachList(){u.importObject("businessCloudObject").getCoachMemberList().then((e=>{console.log(e,"腻"),this.cocahMemberLimit=e.affectedDocs})).catch((e=>{}))},getMemberList(e){this.meberList=e},onClickPopMenu(e){this.showMenuPop=!1},jumpQuery(){console.log(111),f({key:"isActive",success:function(e){console.log("success")}}),b({url:"/pages/memberQuery/memberQuery",success:e=>{},fail:()=>{},complete:()=>{}})},memberSrollTop(e){this.scrollTop=e.detail.scrollTop,this.cellingFlag=this.scrollTop>50},change(){_("loginNum","1"),this.$refs.first_popup.close(),this.showPopover=!1},addClick(){try{_("isActive",this.isActive)}catch(e){}u.importObject("businessCloudObject").getCoachMemberList().then((e=>{console.log(e,"腻"),this.cocahMemberLimit=e.affectedDocs,!this.addUpperLimit&&this.cocahMemberLimit>=7?g({title:"普通教练限添加7名学员,升级金卡教练获取更多权益~",duration:1e3,width:180,icon:"none"}):(this.addUpperLimit||this.cocahMemberLimit<7)&&b({url:"/pages/addMyMebers/addMyMebers?isActive="+this.isActive,success:e=>{},fail:()=>{},complete:()=>{}})})).catch((e=>{}))},buyClick(e){this.isActive=e}}},[["render",function(e,o,a,h,d,m){const u=v("BgTheamCompontent"),f=w,b=p,_=v("MemberList"),g=k,j=v("ZbTooltip"),A=S(L("uni-popup"),$),T=C,z=M;return t(),s(b,{class:"move_area_style"},{default:l((()=>[i(z,null,{default:l((()=>[i(b,{class:"content_style"},{default:l((()=>[i(u,{theamType:"currency"}),i(g,{onScroll:m.memberSrollTop,"scroll-y":"true"},{default:l((()=>[i(b,{class:"header_style"},{default:l((()=>[i(b,{class:"header_left_style"},{default:l((()=>[i(b,{class:"left_content_style"},{default:l((()=>[d.avatar?(t(),s(f,{key:0,class:"left_content_img_style",src:d.avatar},null,8,["src"])):y("",!0),i(b,{class:"left_header_style"},{default:l((()=>[c("我的会员")])),_:1}),i(b,{class:"left_num_style"},{default:l((()=>[c(x(d.meberList.length),1)])),_:1})])),_:1})])),_:1}),i(b,{class:r(["header_right_style",d.cellingFlag?"search_anmition_style":""])},{default:l((()=>[i(f,{class:"right_img_style",src:"/assets/fangdajing.f4179530.svg",onClick:m.jumpQuery},null,8,["onClick"])])),_:1},8,["class"])])),_:1}),i(b,{class:r(["is_buy_style",d.cellingFlag?"celling_animation_style":""])},{default:l((()=>[i(b,{class:r(["buy_left",1===d.isActive?"active":""]),onClick:o[0]||(o[0]=n((e=>m.buyClick(1)),["stop"]))},{default:l((()=>[c("已购课")])),_:1},8,["class"]),i(b,{class:r(["buy_right",0===d.isActive?"active":""]),onClick:o[1]||(o[1]=e=>m.buyClick(0))},{default:l((()=>[c("未购课")])),_:1},8,["class"])])),_:1},8,["class"]),d.cellingFlag?(t(),s(b,{key:0,class:"zhan_wei_style"})):y("",!0),i(_,{ref:"memberList",onGetMemberList:m.getMemberList,isActive:d.isActive,type:"home",page:d.page,currentNum:d.currentNum},null,8,["onGetMemberList","isActive","page","currentNum"])])),_:1},8,["onScroll"])])),_:1}),i(T,{direction:"all",inertia:""},{default:l((()=>[i(b,{class:r(["btn_add",0==d.loginNum?"guid_style":""])},{default:l((()=>[i(b,{class:"add_style"},{default:l((()=>[i(f,{class:"add_img_style",src:"/assets/add.f144635d.svg",onClick:n(m.addClick,["stop"])},null,8,["onClick"]),i(b,null,{default:l((()=>[i(j,{visible:d.showPopover,placement:"left",color:"linear-gradient(180deg, #2BA9FF 0%, #1370FF 100%)",content:"Hi～你来了\r\n\t\t\t  点这里添加会员吧",show:!0},null,8,["visible","color"])])),_:1})])),_:1}),i(A,{class:"updatePopup",ref:"first_popup",type:"center",onChange:m.change},null,8,["onChange"])])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-1d8cc221"]]);export{F as default};
