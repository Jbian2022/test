import{E as e,H as t,o as s,a as n,w as a,i as o,b as l,d as i,t as r,q as c,C as u,I as d}from"./index.3c07bbe7.js";import{M as m}from"./mPicker.d4a9f052.js";import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-transition.23e18650.js";import"./uni-app.es.2e9f864b.js";const f=e.importObject("my");const h=p({components:{Mpicker:m},data:()=>({title:"签名",text:null,genderName:null,sexShow:!1,range:[{text:"男",value:"1"},{text:"女",value:"2"}]}),onLoad:function(e){"username"===e.type?this.title="用户名":"gender"===e.type?this.title="性别":"comment"===e.type&&(this.title="签名")},mounted(){this.getUserInfo()},methods:{async getUserInfo(){const e=await f.getUserInfo(),{username:t,gender:s,comment:n}=e.data;"用户名"==this.title?this.text=t||"":"性别"==this.title?(this.text=s||null,this.genderName=0==s?"未知":1==s?"男":2==s?"女":null):"签名"==this.title&&(this.text=n||null),console.log(e,88888)},async updateUserInfo(){let e="comment";"用户名"==this.title?e="username":"性别"==this.title&&(e="gender");const t=await f.updateUserInfo({[e]:this.text});console.log(t,88),this.onClickLeft()},sexConfirm(e){const t=this.range[e[0]].value;"0"===t?(this.text=0,this.genderName="未知"):"1"===t?(this.text=1,this.genderName="男"):"2"===t&&(this.text=2,this.genderName="女"),this.sexShow=!1},onClickLeft(){t({url:"/pages/personalInfo/personalInfo"})},open(){this.sexShow=!0}},onBackPress:()=>(t({url:"/pages/personalInfo/personalInfo"}),!0)},[["render",function(e,t,m,p,f,h){const g=o,x=c("van-icon"),k=u,C=d,_=c("van-button"),w=c("Mpicker");return s(),n(g,{class:"update-signature"},{default:a((()=>[l(g,{class:"status_bar"}),l(g,{class:"arrow-left",onClick:h.onClickLeft},{default:a((()=>[l(x,{name:"arrow-left"})])),_:1},8,["onClick"]),l(g,{class:"title"},{default:a((()=>[i("修改"+r(f.title),1)])),_:1}),l(g,{class:"group"},{default:a((()=>["性别"===f.title?(s(),n(g,{key:0,class:"input",onClick:h.open},{default:a((()=>[l(k,null,{default:a((()=>[i(r(f.genderName),1)])),_:1}),l(x,{name:"arrow"})])),_:1},8,["onClick"])):(s(),n(C,{key:1,class:"uni-input",type:"text",modelValue:f.text,"onUpdate:modelValue":t[0]||(t[0]=e=>f.text=e),placeholder:"请输入"+f.title},null,8,["modelValue","placeholder"]))])),_:1}),l(g,{class:"footer-button"},{default:a((()=>[l(_,{block:"",onClick:h.updateUserInfo},{default:a((()=>[i("确认")])),_:1},8,["onClick"])])),_:1}),l(w,{mode:"bottom",show:f.sexShow,range:f.range,rangeKey:"text",onConfirm:h.sexConfirm,onCancel:t[1]||(t[1]=e=>f.sexShow=!1),pickerType:"ordinary",defaultIndex:0},null,8,["show","range","onConfirm"])])),_:1})}],["__scopeId","data-v-04e55ecc"]]);export{h as default};
