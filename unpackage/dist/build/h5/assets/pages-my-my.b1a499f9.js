import{E as e,m as a,H as s,a4 as l,_ as t,s as n,o as r,a as o,w as c,i as u,b as i,e as f,d as p,t as d,A as m,B as v,F as _,q as C,C as k,v as h}from"./index.3c07bbe7.js";import{_ as g}from"./uni-popup.159bf41e.js";import{r as x}from"./uni-app.es.2e9f864b.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";import"./uni-transition.23e18650.js";const y=e.importObject("my");const b=I({data:()=>({userInfo:{username:"",avatar:null,comment:null,vipLevel:null,vipEndDate:null,referrer:null},columns:[{text:"001",value:"001"},{text:"002",value:"002"},{text:"003",value:"003"},{text:"004",value:"004"},{text:"005",value:"005"},{text:"006",value:"006"},{text:"007",value:"007"},{text:"008",value:"008"},{text:"009",value:"009"},{text:"010",value:"010"}]}),onShow(){this.getUserInfo()},methods:{pickerSelect(e){this.columns.forEach((e=>e.active=!1)),e.active=!0},async getUserInfo(){const e=await y.getUserInfo(),{avatar:a,username:s,comment:l,vipLevel:t,vipEndDate:n,referrer:r}=e.data;this.userInfo={avatar:a||null,username:s||null,comment:l||null,vipLevel:t||null,vipEndDate:n||null,referrer:r||null},console.log(e,88888)},async setReferrer(){await y.updateUserInfo({referrer:this.userInfo.referrer}),a({title:"设置成功",duration:2e3})},openCard(){s({url:"/pages/openCard/openCard"})},setUp(){s({url:"/pages/setUp/setUp"})},personalInfo(){s({url:"/pages/personalInfo/personalInfo"})},copyText(e){l({data:e,success:function(){console.log("success"),a({title:"复制成功",duration:2e3})}})},openSheet(){if(this.userInfo.referrer)return!1;this.$refs.popup.open()},popupChange(e){if(e.show)t();else{const e=setTimeout((()=>{n(),clearTimeout(e)}),300)}},onConfirm(){if(this.columns.every((e=>!e.active)))return;const e=this.columns.find((e=>e.active));this.userInfo.referrer=e.text,this.$refs.popup.close(),this.setReferrer()},onCancel(){this.$refs.popup.close()}}},[["render",function(e,a,s,l,t,n){const I=u,y=C("van-image"),b=k,U=C("van-cell"),j=x(h("uni-popup"),g);return r(),o(I,{class:"my"},{default:c((()=>[i(I,{class:"background"}),i(I,{class:"status_bar"}),i(I,{class:"header"},{default:c((()=>[i(I,{class:"logo",onClick:n.personalInfo},{default:c((()=>[i(y,{round:"",src:t.userInfo.avatar},null,8,["src"]),i(I,{class:"edit-icon"})])),_:1},8,["onClick"]),i(I,{class:"user-name"},{default:c((()=>[i(I,{class:f(["name",{ordinary:2===t.userInfo.vipLevel}])},{default:c((()=>[p(d(t.userInfo.username),1)])),_:1},8,["class"]),i(I,{class:"des"},{default:c((()=>[p(d(t.userInfo.comment),1)])),_:1})])),_:1}),i(I,{class:"config",onClick:n.setUp},null,8,["onClick"])])),_:1}),2===t.userInfo.vipLevel?(r(),o(I,{key:0,class:"vip-info",onClick:n.openCard},{default:c((()=>[i(I,{class:"left"},{default:c((()=>[i(I,{class:"vip-grade"},{default:c((()=>[i(I,{class:"grade-name"},{default:c((()=>[p("金卡教练")])),_:1}),i(I,{class:"grade-status"},{default:c((()=>[p("生效中")])),_:1})])),_:1}),i(I,{class:"vip-expiration-date"},{default:c((()=>[p("2023.01.20到期 >")])),_:1})])),_:1}),i(I,{class:"right"})])),_:1},8,["onClick"])):(r(),o(I,{key:1,class:"vip-info ordinary",onClick:n.openCard},{default:c((()=>[i(I,{class:"left"},{default:c((()=>[i(I,{class:"vip-grade"},{default:c((()=>[i(I,{class:"grade-name"},{default:c((()=>[p("蓝卡会员")])),_:1})])),_:1}),i(I,{class:"vip-expiration-date"},{default:c((()=>[p("开通金卡教练，畅想多项特权 >")])),_:1})])),_:1}),i(I,{class:"right"})])),_:1},8,["onClick"])),i(I,{class:"contact-customer"},{default:c((()=>[i(I,{class:"title"},{default:c((()=>[p("联系客服")])),_:1}),i(I,{class:"customer-info"},{default:c((()=>[i(I,{class:"customer-item",onClick:a[0]||(a[0]=e=>n.copyText("1234567890"))},{default:c((()=>[i(b,null,{default:c((()=>[p("客服微信：1234567890")])),_:1}),i(b,null,{default:c((()=>[p("复制")])),_:1})])),_:1}),i(I,{class:"customer-item",onClick:a[1]||(a[1]=e=>n.copyText("Kingtran12@aliyun.com"))},{default:c((()=>[i(b,null,{default:c((()=>[p("客服邮箱：Kingtran12@aliyun.com")])),_:1}),i(b,null,{default:c((()=>[p("复制")])),_:1})])),_:1})])),_:1})])),_:1}),i(I,{class:"recommend"},{default:c((()=>[i(U,{title:"推荐人","is-link":!t.userInfo.referrer,value:t.userInfo.referrer,onClick:n.openSheet},{icon:c((()=>[i(I,{class:"icon"})])),_:1},8,["is-link","value","onClick"])])),_:1}),i(j,{ref:"popup",type:"bottom",class:"recommend-sheet",onChange:n.popupChange},{default:c((()=>[i(I,{class:"picker-box"},{default:c((()=>[i(I,{class:"picker-header"},{default:c((()=>[i(I,{class:"cancel-btn",onClick:n.onCancel},{default:c((()=>[p("取消")])),_:1},8,["onClick"]),i(I,{class:"title"},{default:c((()=>[p("推荐人")])),_:1}),i(I,{class:"success-btn",onClick:n.onConfirm},{default:c((()=>[p("确认")])),_:1},8,["onClick"])])),_:1}),i(I,{class:"message"},{default:c((()=>[i(I,{class:"text"},{default:c((()=>[p("请注意：推荐人选择之后不可更改")])),_:1})])),_:1}),i(I,{class:"picker-content"},{default:c((()=>[(r(!0),m(_,null,v(t.columns,((e,a)=>(r(),o(I,{class:f(["picker-item",{active:e.active}]),key:a,onClick:a=>n.pickerSelect(e)},{default:c((()=>[p(d(e.text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["onChange"])])),_:1})}],["__scopeId","data-v-ebafc346"]]);export{b as default};
